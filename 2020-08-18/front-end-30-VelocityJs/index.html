<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Velocity.js 動畫引擎 | 前端三十之一 | shanpig&#39;s tech blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="今天要來介紹的，是一個相當常見的動畫引擎：Velocity.js。 簡介Velocity 是由 Julian Shapiro 開發的簡便動畫引擎，提供順暢且語法簡易的程式碼。目前其授權為 MIT 授權，為開放軟體。 許多人會因為 javascript 動畫的效能比 CSS 慢，而放棄 javascript 的編寫方式。而 Velocity 聲稱其能夠提供媲美 CSS 動畫的流暢度，提倡使用 jav">
<meta property="og:type" content="article">
<meta property="og:title" content="Velocity.js 動畫引擎 | 前端三十之一">
<meta property="og:url" content="http://shanpig.github.io/blog/2020-08-18/front-end-30-VelocityJs/index.html">
<meta property="og:site_name" content="shanpig&#39;s tech blog">
<meta property="og:description" content="今天要來介紹的，是一個相當常見的動畫引擎：Velocity.js。 簡介Velocity 是由 Julian Shapiro 開發的簡便動畫引擎，提供順暢且語法簡易的程式碼。目前其授權為 MIT 授權，為開放軟體。 許多人會因為 javascript 動畫的效能比 CSS 慢，而放棄 javascript 的編寫方式。而 Velocity 聲稱其能夠提供媲美 CSS 動畫的流暢度，提倡使用 jav">
<meta property="og:locale">
<meta property="article:published_time" content="2020-08-18T00:56:33.000Z">
<meta property="article:modified_time" content="2022-06-12T01:04:23.001Z">
<meta property="article:author" content="shanpig">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="shanpig's tech blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">shanpig&#39;s tech blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">shanpig 的技術部落格</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSSフィード"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="検索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="検索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://shanpig.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-front-end-30-VelocityJs" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020-08-18/front-end-30-VelocityJs/" class="article-date">
  <time class="dt-published" datetime="2020-08-18T00:56:33.000Z" itemprop="datePublished">2020-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Velocity.js 動畫引擎 | 前端三十之一
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天要來介紹的，是一個相當常見的動畫引擎：<a target="_blank" rel="noopener" href="http://velocityjs.org/">Velocity.js</a>。</p>
<h1 id="簡介"><a href="#簡介" class="headerlink" title="簡介"></a>簡介</h1><p>Velocity 是由 Julian Shapiro 開發的簡便動畫引擎，提供順暢且語法簡易的程式碼。目前其授權為 MIT 授權，為開放軟體。</p>
<p>許多人會因為 javascript 動畫的效能比 CSS 慢，而放棄 javascript 的編寫方式。而 Velocity 聲稱其能夠提供媲美 CSS 動畫的流暢度，提倡使用 javascript 以邏輯為導向的編寫方式，以降低複雜動畫在 CSS 上的困難和難以擴充、維護等缺點。</p>
<p>在應用上，包括 Uber、Samsung、WhatsApp、Tumblr、HTC、Windows 等等著名網站的使用者介面，都使用了 Velocity 作為動畫驅動。</p>
<p>Velocity 無論 jQuery 存在與否都能夠進行 DOM 控制，其其差異僅在語法上的簡潔程度。</p>
<hr>
<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><p>引用 Velocity 有許多方式。主要分成 load as script 或是 load as module。若要以 script 方式引入，可 <a target="_blank" rel="noopener" href="http://velocityjs.org/">從官網下載</a> 或是 <a target="_blank" rel="noopener" href="https://github.com/julianshapiro/velocity#quickstart">使用 CDN</a>。以 module 形式引入的話，可用 npm、Browserify、RequireJS 等方式，官網上皆有詳盡紀載。</p>
<p>要注意的是，在寫這篇文章時，2.0.6 版本的 UI pack 似乎尚不穩定，因此本篇中使用的是 1.5.0版的 Velocity。</p>
<h1 id="基本語法介紹"><a href="#基本語法介紹" class="headerlink" title="基本語法介紹"></a>基本語法介紹</h1><p>沒有引入 jQuery 時，需透過 Velocitiy utility function 進行呼叫：</p>
<p><code>Velocity(element, &#123;property:value&#125;, &#123;options: value&#125;)</code></p>
<p>引入 jQuery 後，語法和 jQuery 自身的 .animate() 使用方式幾乎一致：</p>
<p><code>$(query).velocity( &#123;property:value&#125;, &#123;options: value&#125;)</code></p>
<p>也可以透過 utiliti function 進行呼叫：</p>
<p><code>$.Velocity(element, &#123;property:value&#125;, &#123;options: value&#125;)</code></p>
<hr>
<h1 id="語法規則"><a href="#語法規則" class="headerlink" title="語法規則"></a>語法規則</h1><p>以 jQuery 呼叫方式為例：</p>
<p><code>$(query).velocity( &#123;property:value&#125;, &#123;options: value&#125;)</code></p>
<p>$(query) 即為一般 jQuery object，後面 property 則對應到一系列 CSS 屬性。其 value 可以是一般 CSS value，接受 CSS 內建單位。</p>
<p>同時，也可以透過 +&#x3D;, -&#x3D;, *&#x3D;, &#x2F;&#x3D; 等運算指派作為前綴。使用運算指派時，會對屬性值進行運算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;.box&#x27;</span>).<span class="title function_">velocity</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;30px&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;150px&#x27;</span>,</span><br><span class="line">    <span class="attr">left</span>: <span class="string">&#x27;+=100px&#x27;</span></span><br><span class="line">&#125;, &#123;<span class="attr">options</span>: value&#125;)</span><br></pre></td></tr></table></figure>

<p>上方例子將一矩形長寬改變後，向右移動 100 pixel。<a target="_blank" rel="noopener" href="https://codepen.io/_shanpig/pen/GRZqNeO">（CodePen 玩玩看！）</a></p>
<hr>
<p>在 Velocity 中設定的每個屬性，一次只能修改一個數值。例如：width, padding-top, margin-left 等等。而由於物件名稱不可出現 dash (-)，所有含 dash 的屬性名稱皆以 camelCase 代替。</p>
<p>另外，針對多數值屬性，比如：box-shadow, transform 等等，Velocity 分別為其製作 <a target="_blank" rel="noopener" href="http://velocityjs.org/#hook">hook</a> 以單獨使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.box&quot;</span>).<span class="title function_">velocity</span>(&#123;</span><br><span class="line">    <span class="attr">translateX</span>: <span class="string">&#x27;+=100px&#x27;</span>,</span><br><span class="line">    <span class="attr">rotateZ</span>: <span class="string">&#x27;+=90deg&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上方例子將一矩形一邊向右移動，一邊旋轉。（CodePen 玩玩看！）</p>
<p>其餘的不同 CSS 和 Velocity 屬性名稱對照，可以參照官網的列表喔！</p>
<h1 id="動畫串聯-Chaining"><a href="#動畫串聯-Chaining" class="headerlink" title="動畫串聯 (Chaining)"></a>動畫串聯 (Chaining)</h1><p>當一連串的動畫，想要依序播放時，可以以 jQuery 語法串聯，或是用 utility function 寫成多行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.box&quot;</span>)</span><br><span class="line">  .<span class="title function_">velocity</span>(&#123; <span class="attr">translateX</span>: <span class="string">&#x27;+=100px&#x27;</span> &#125;)</span><br><span class="line">  .<span class="title function_">velocity</span>(&#123; <span class="attr">translateY</span>: <span class="string">&#x27;+=100px&#x27;</span> &#125;)</span><br><span class="line">  .<span class="title function_">velocity</span>(&#123; <span class="attr">translateX</span>: <span class="string">&#x27;-=100px&#x27;</span> &#125;)</span><br><span class="line">  .<span class="title function_">velocity</span>(&#123; <span class="attr">translateY</span>: <span class="string">&#x27;-=100px&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>上方例子將一矩形進行一連串移動。<a target="_blank" rel="noopener" href="https://codepen.io/_shanpig/pen/jOqrybR">（CodePen 玩玩看！）</a></p>
<p>utility function 的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>)</span><br><span class="line"><span class="title class_">Velocity</span>(box, &#123; <span class="attr">translateX</span>: <span class="string">&#x27;+=100px&#x27;</span>&#125;);</span><br><span class="line"><span class="title class_">Velocity</span>(box, &#123; <span class="attr">translateY</span>: <span class="string">&#x27;+=100px&#x27;</span>&#125;);</span><br><span class="line"><span class="title class_">Velocity</span>(box, &#123; <span class="attr">translateX</span>: <span class="string">&#x27;-=100px&#x27;</span>&#125;);</span><br><span class="line"><span class="title class_">Velocity</span>(box, &#123; <span class="attr">translateY</span>: <span class="string">&#x27;-=100px&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="動畫選項-Options"><a href="#動畫選項-Options" class="headerlink" title="動畫選項 (Options)"></a>動畫選項 (Options)</h1><p>在 velocity 的選項中有諸如延遲、循環等各種功能。以下為各選項預設值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">duration</span>: <span class="number">400</span>, <span class="comment">// 動畫時長</span></span><br><span class="line"><span class="attr">easing</span>: <span class="string">&quot;swing&quot;</span>, <span class="comment">// 動畫速度調節函數</span></span><br><span class="line"><span class="attr">queue</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 動畫分組</span></span><br><span class="line"><span class="attr">begin</span>: <span class="literal">undefined</span>, <span class="comment">// 於動畫開始前執行的函數 (只執行一次)</span></span><br><span class="line"><span class="attr">progress</span>: <span class="literal">undefined</span>, <span class="comment">// 於動畫中持續執行的函數</span></span><br><span class="line"><span class="attr">complete</span>: <span class="literal">undefined</span>, <span class="comment">// 於動畫結束後執行的函數 (只執行一次)</span></span><br><span class="line"><span class="attr">display</span>: <span class="literal">undefined</span>, <span class="comment">// 於動畫結束後的 css 屬性 display 改變</span></span><br><span class="line"><span class="attr">visibility</span>: <span class="literal">undefined</span>, <span class="comment">// 於動畫結束後的 css 屬性 visibility 改變</span></span><br><span class="line"><span class="attr">loop</span>: <span class="literal">false</span>, <span class="comment">// 循環動畫次數</span></span><br><span class="line"><span class="attr">delay</span>: <span class="literal">false</span>, <span class="comment">// 動畫前的延遲</span></span><br><span class="line"><span class="attr">mobileHA</span>: <span class="literal">true</span> <span class="comment">// 手機硬體加速支援</span></span><br></pre></td></tr></table></figure>

<p>這裡針對較特殊的選項作介紹：</p>
<ul>
<li><h3 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h3><p>不設定任何值的話，velocity 會以 chaining 規則將動畫串聯。<br>若設為 false，動畫會與前一個動畫同時播放；設定字串，則會為動畫進行分組，並可利用 dequeue 進行播放。</p>
</li>
<li><h3 id="progress"><a href="#progress" class="headerlink" title="progress"></a>progress</h3><p>在動畫過程中，不斷執行的函數。傳入的 callback function，其中第一個參數為 element，其餘則依序是：</p>
<ul>
<li>complete	(完成百分比)</li>
<li>remaining	(剩餘時間，毫秒為單位)</li>
<li>start			(動畫開始時間，Unix time)</li>
<li>tween	  	(自定義進度最小值與最大值)。</li>
</ul>
</li>
</ul>
<p>在 callback function 中，可使用此四個參數，進行動畫的追蹤或列出進度等。</p>
<ul>
<li><h3 id="mobileHA"><a href="#mobileHA" class="headerlink" title="mobileHA"></a>mobileHA</h3>由於手機資源較稀缺，故在動畫呈現上需要做硬體上的加速。 Velocity 預設在手機上自動開啟硬體加速，因此一般可以忽略。</li>
</ul>
<h1 id="停止動畫的方式"><a href="#停止動畫的方式" class="headerlink" title="停止動畫的方式"></a>停止動畫的方式</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$element.<span class="title function_">velocity</span>(<span class="string">&quot;stop&quot;</span>); <span class="comment">// 停止所有該元素的動畫</span></span><br><span class="line">$element.<span class="title function_">velocity</span>(<span class="string">&quot;stop&quot;</span>, <span class="string">&quot;myQueue&quot;</span>); <span class="comment">// 停止某個分組的動畫</span></span><br><span class="line">$element.<span class="title function_">velocity</span>(<span class="string">&quot;finish&quot;</span>); <span class="comment">// 直接跳到動畫結束狀態</span></span><br></pre></td></tr></table></figure>
<h1 id="練習專案"><a href="#練習專案" class="headerlink" title="練習專案"></a><a target="_blank" rel="noopener" href="https://codepen.io/_shanpig/pen/jOqrBXL">練習專案</a></h1><p>我利用 Velocity 製作了一個很簡易的，展示細節內容的動畫按鈕，歡迎玩玩看囉！</p>
<p>Velocity 還有很多我並未寫出來的功能，大家可以去官網詳讀 ~</p>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ol>
<li><a target="_blank" rel="noopener" href="http://velocityjs.org/">Velocity 官網</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/julianshapiro/velocity#npm-npm-install-velocity-animatebeta">Velocity github</a></li>
<li><a target="_blank" rel="noopener" href="https://www.smashingmagazine.com/2014/09/animating-without-jquery/">How to animate without jQuery</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shanpig.github.io/blog/2020-08-18/front-end-30-VelocityJs/" data-id="cl4altdyx0000zgtf0s5p7k43" data-title="Velocity.js 動畫引擎 | 前端三十之一" class="article-share-link">共有</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2022-06-11/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">次の記事</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/blog/2020-08-14/front-end-30-start/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前の記事</strong>
      <div class="article-nav-title">前端三十，任務開始！</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">アーカイブ</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最近の投稿</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2022-06-12/front-end-30-omnifood-mockup/">Omnifood 切版練習 | 前端三十之二</a>
          </li>
        
          <li>
            <a href="/blog/2022-06-11/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/blog/2020-08-18/front-end-30-VelocityJs/">Velocity.js 動畫引擎 | 前端三十之一</a>
          </li>
        
          <li>
            <a href="/blog/2020-08-14/front-end-30-start/">前端三十，任務開始！</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 shanpig<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>